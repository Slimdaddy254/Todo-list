(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,o(i.key),i)}}function o(e){var o=function(e){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(o)?o:o+""}var n=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projects=JSON.parse(localStorage.getItem("projects"))||[{id:"default",name:"My Tasks"}]},(o=[{key:"getProjects",value:function(){return this.projects}},{key:"addProject",value:function(t){var e={id:Date.now().toString(),name:t};return this.projects.push(e),this.saveProjects(),e}},{key:"deleteProject",value:function(t){return"default"!==t&&(this.projects=this.projects.filter((function(e){return e.id!==t})),this.saveProjects(),!0)}},{key:"saveProjects",value:function(){localStorage.setItem("projects",JSON.stringify(this.projects))}}])&&e(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,o}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function c(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var d=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.todos=JSON.parse(localStorage.getItem("todos"))||[]},e=[{key:"getTodos",value:function(t){return this.todos.filter((function(e){return e.projectId===t}))}},{key:"addTodo",value:function(t){var e=t.title,o=t.description,n=t.dueDate,i=t.priority,r=t.projectId,c={id:Date.now().toString(),title:e,description:o,dueDate:n,priority:i,projectId:r,completed:!1};return this.todos.push(c),this.saveTodos(),c}},{key:"toggleTodo",value:function(t){var e=this.todos.find((function(e){return e.id===t}));e&&(e.completed=!e.completed,this.saveTodos())}},{key:"deleteTodo",value:function(t){this.todos=this.todos.filter((function(e){return e.id!==t})),this.saveTodos()}},{key:"saveTodos",value:function(){localStorage.setItem("todos",JSON.stringify(this.todos))}}],e&&r(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}new(function(){return t=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projectService=new n,this.todoService=new d,this.currentProjectId="default","loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function(){return e.initialize()})):this.initialize()},e=[{key:"initialize",value:function(){this.initializeElements(),this.bindEvents(),this.render()}},{key:"initializeElements",value:function(){this.projectsList=document.getElementById("projectsList"),this.todoList=document.getElementById("todoList"),this.currentProjectTitle=document.getElementById("currentProject"),this.addProjectBtn=document.getElementById("addProjectBtn"),this.addTodoBtn=document.getElementById("addTodoBtn"),this.projectModal=document.getElementById("projectModal"),this.todoModal=document.getElementById("todoModal"),this.deleteModal=document.getElementById("deleteModal"),this.projectForm=document.getElementById("projectForm"),this.todoForm=document.getElementById("todoForm"),this.cancelProjectBtn=document.getElementById("cancelProject"),this.cancelTodoBtn=document.getElementById("cancelTodo"),this.cancelDeleteBtn=document.getElementById("cancelDelete"),this.confirmDeleteBtn=document.getElementById("confirmDelete"),this.deleteModalTitle=document.getElementById("deleteModalTitle"),this.deleteModalMessage=document.getElementById("deleteModalMessage")}},{key:"bindEvents",value:function(){var t=this;this.addProjectBtn.addEventListener("click",(function(){return t.showProjectModal()})),this.cancelProjectBtn.addEventListener("click",(function(){return t.closeProjectModal()})),this.projectForm.addEventListener("submit",(function(e){return t.handleProjectSubmit(e)})),this.addTodoBtn.addEventListener("click",(function(){return t.showTodoModal()})),this.cancelTodoBtn.addEventListener("click",(function(){return t.closeTodoModal()})),this.todoForm.addEventListener("submit",(function(e){return t.handleTodoSubmit(e)})),this.cancelDeleteBtn.addEventListener("click",(function(){return t.closeDeleteModal()})),this.confirmDeleteBtn.addEventListener("click",(function(){return t.handleConfirmDelete()}))}},{key:"handleProjectSubmit",value:function(t){t.preventDefault();var e=document.getElementById("projectName").value.trim();e&&(this.projectService.addProject(e),this.closeProjectModal(),this.render())}},{key:"handleTodoSubmit",value:function(t){t.preventDefault();var e={title:document.getElementById("todoTitle").value.trim(),description:document.getElementById("todoDescription").value.trim(),dueDate:document.getElementById("todoDueDate").value,priority:document.getElementById("todoPriority").value,projectId:this.currentProjectId};e.title&&e.description&&e.dueDate&&(this.todoService.addTodo(e),this.closeTodoModal(),this.render())}},{key:"render",value:function(){this.renderProjects(),this.renderTodos()}},{key:"renderProjects",value:function(){var t=this,e=this.projectService.getProjects();this.projectsList.innerHTML=e.map((function(e){return t.createProjectElement(e)})).join(""),this.attachProjectEventListeners()}},{key:"renderTodos",value:function(){var t=this,e=this.todoService.getTodos(this.currentProjectId);this.todoList.innerHTML=e.map((function(e){return t.createTodoElement(e)})).join(""),this.attachTodoEventListeners()}},{key:"createProjectElement",value:function(t){return'\n      <div class="project-item '.concat(t.id===this.currentProjectId?"active":"",'"\n           data-project-id="').concat(t.id,'">\n        ').concat(t.name,"\n        ").concat("default"!==t.id?'<button class="delete-btn" data-project-id="'.concat(t.id,'">×</button>'):"","\n      </div>\n    ")}},{key:"createTodoElement",value:function(t){return'\n      <div class="todo-item">\n        <div class="todo-checkbox '.concat(t.completed?"checked":"",'"\n             data-todo-id="').concat(t.id,'"></div>\n        <div class="todo-content">\n          <h3 class="todo-title">').concat(t.title,'</h3>\n          <p class="todo-description">').concat(t.description,'</p>\n          <div class="todo-meta">\n            <span class="todo-priority priority-').concat(t.priority,'">').concat(t.priority,'</span>\n            <span class="todo-date">').concat((e=t.dueDate,new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),'</span>\n          </div>\n        </div>\n        <button class="delete-btn" data-todo-id="').concat(t.id,'">×</button>\n      </div>\n    ');var e}},{key:"attachProjectEventListeners",value:function(){var t=this;this.projectsList.querySelectorAll(".project-item").forEach((function(e){e.addEventListener("click",(function(o){o.target.classList.contains("delete-btn")||t.switchProject(e.dataset.projectId)}))})),this.projectsList.querySelectorAll(".delete-btn").forEach((function(e){e.addEventListener("click",(function(o){o.stopPropagation(),t.showDeleteConfirmation("project",e.dataset.projectId)}))}))}},{key:"attachTodoEventListeners",value:function(){var t=this;this.todoList.querySelectorAll(".todo-checkbox").forEach((function(e){e.addEventListener("click",(function(){t.todoService.toggleTodo(e.dataset.todoId),t.render()}))})),this.todoList.querySelectorAll(".delete-btn").forEach((function(e){e.addEventListener("click",(function(){t.showDeleteConfirmation("todo",e.dataset.todoId)}))}))}},{key:"switchProject",value:function(t){this.currentProjectId=t;var e=this.projectService.getProjects().find((function(e){return e.id===t}));this.currentProjectTitle.textContent=e.name,this.render()}},{key:"showProjectModal",value:function(){this.projectModal.classList.add("active");var t=document.getElementById("projectName");t.value="",t.focus()}},{key:"closeProjectModal",value:function(){this.projectModal.classList.remove("active"),this.projectForm.reset()}},{key:"showTodoModal",value:function(){this.todoModal.classList.add("active");var t=document.getElementById("todoTitle");t.value="",document.getElementById("todoDescription").value="",document.getElementById("todoDueDate").value="",document.getElementById("todoPriority").value="medium",t.focus()}},{key:"closeTodoModal",value:function(){this.todoModal.classList.remove("active"),this.todoForm.reset()}},{key:"showDeleteConfirmation",value:function(t,e){this.pendingDeleteItem={type:t,id:e},"project"===t?(this.deleteModalTitle.textContent="Delete Project",this.deleteModalMessage.textContent="Are you sure you want to delete this project? All associated tasks will be deleted."):(this.deleteModalTitle.textContent="Delete Task",this.deleteModalMessage.textContent="Are you sure you want to delete this task?"),this.deleteModal.classList.add("active")}},{key:"closeDeleteModal",value:function(){this.deleteModal.classList.remove("active"),this.pendingDeleteItem=null}},{key:"handleConfirmDelete",value:function(){if(this.pendingDeleteItem){var t=this.pendingDeleteItem,e=t.type,o=t.id;"project"===e?this.projectService.deleteProject(o)&&(this.currentProjectId===o?this.switchProject("default"):this.render()):(this.todoService.deleteTodo(o),this.render()),this.closeDeleteModal()}}}],e&&s(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}())})();